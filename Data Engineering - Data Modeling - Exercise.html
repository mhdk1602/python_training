<h2>Exercise 1: Design a Simple ER Diagram</h2>
<p>Consider an online bookstore application. The main entities are <strong>Author</strong>, <strong>Book</strong>, and <strong>Category</strong>. The application needs to store the following information:</p>

<ul>
  <li>Author: id, first name, last name, and date of birth</li>
  <li>Book: id, title, publication date, price, and author</li>
  <li>Category: id and name</li>
</ul>

<p>Design an Entity-Relationship (ER) diagram for this application. Identify the primary keys and relationships between the entities. Consider the following constraints:</p>

<ol>
  <li>A book must have exactly one author, but an author can write multiple books.</li>
  <li>A book can belong to one or more categories, and a category can have multiple books.</li>
</ol>

<button onclick="toggleAnswer()">View answer</button>
<div id="answer" style="display:none;">
    <h2>Answer to Exercise 1</h2>
    <p>For the given exercise, the ER diagram would have the following entities and relationships:</p>
    <ul>
      <li>Entities:</li>
      <ul>
        <li>Author: id (primary key), first_name, last_name, date_of_birth</li>
        <li>Book: id (primary key), title, publication_date, price, author_id (foreign key)</li>
        <li>Category: id (primary key), name</li>
        <li>Book_Category: book_id (foreign key), category_id (foreign key) [This is a junction table to store the many-to-many relationship between books and categories]</li>
      </ul>
      <li>Relationships:</li>
      <ul>
        <li>Author (1) --- (M) Book: One-to-many relationship between Author and Book, with the foreign key <code>author_id</code> in the Book table.</li>
        <li>Book (M) --- (M) Category: Many-to-many relationship between Book and Category, represented by the junction table <code>Book_Category</code>, which has foreign keys <code>book_id</code> and <code>category_id</code>.</li>
      </ul>
    </ul>
</div>
<script>
function toggleAnswer() {
    var answer = document.getElementById("answer");
    if (answer.style.display === "none") {
        answer.style.display = "block";
    } else {
        answer.style.display = "none";
    }
}
</script>&nbsp;&nbsp;<br><br>

<hr style="background: linear-gradient(to right, #f00, #00f); height: 2px; border: none;" />

<h2>Exercise 2: Design a Database Schema</h2>
<p>Based on the ER diagram designed in Exercise 1, create a database schema using SQL commands. List the CREATE TABLE statements for each table, and define the columns, primary keys, and foreign keys as needed.</p>

<button onclick="toggleAnswer2()">View answer</button>
<div id="answer2" style="display:none;">
    <h2>Answer to Exercise 2</h2>
    <p>For the given exercise, the SQL statements for creating the tables based on the ER diagram are:</p>
    <pre>
CREATE TABLE Author (
    id INT PRIMARY KEY,
    first_name VARCHAR(255) NOT NULL,
    last_name VARCHAR(255) NOT NULL,
    date_of_birth DATE
);

CREATE TABLE Category (
    id INT PRIMARY KEY,
    name VARCHAR(255) NOT NULL
);

CREATE TABLE Book (
    id INT PRIMARY KEY,
    title VARCHAR(255) NOT NULL,
    publication_date DATE,
    price DECIMAL(10, 2),
    author_id INT,
    FOREIGN KEY (author_id) REFERENCES Author(id)
);

CREATE TABLE Book_Category (
    book_id INT,
    category_id INT,
    PRIMARY KEY (book_id, category_id),
    FOREIGN KEY (book_id) REFERENCES Book(id),
    FOREIGN KEY (category_id) REFERENCES Category(id)
);
    </pre>
</div>
<script>
function toggleAnswer2() {
    var answer = document.getElementById("answer2");
    if (answer.style.display === "none") {
        answer.style.display = "block";
    } else {
        answer.style.display = "none";
    }
}
</script>&nbsp;&nbsp;<br><br>

<hr style="background: linear-gradient(to right, #f00, #00f); height: 2px; border: none;" />


<h2>Exercise 3: Normalize the Database Schema</h2>
<p>Consider the following table representing a sales database:</p>

<style>
  table {
    border-collapse: collapse;
    border-spacing: 0;
    font-family: Arial, sans-serif;
    margin: 20px;
    width: 70%;
  }
  th,
  td {
    border: 1px solid #ccc;
    padding: 10px;
    text-align: left;
  }
  th {
    background-color: #f2f2f2;
    font-weight: bold;
  }
  tr:nth-child(even) {
    background-color: #f9f9f9;
  }
  table {
    border-radius: 10px;
    overflow: hidden;
  }
  th:first-child,
  td:first-child {
    border-top-left-radius: 10px;
    border-bottom-left-radius: 10px;
  }
  th:last-child,
  td:last-child {
    border-top-right-radius: 10px;
    border-bottom-right-radius: 10px;
  }
</style>

<table>
  <tr>
    <th>OrderID</th>
    <th>CustomerName</th>
    <th>ProductName</th>
    <th>Quantity</th>
    <th>Price</th>
    <th>OrderDate</th>
  </tr>
  <tr>
    <td>1</td>
    <td>Alice</td>
    <td>Laptop</td>
    <td>1</td>
    <td>1000</td>
    <td>2023-01-01</td>
  </tr>
  <tr>
    <td>2</td>
    <td>Bob</td>
    <td>Phone</td>
    <td>2</td>
    <td>500</td>
    <td>2023-01-01</td>
  </tr>
  <tr>
    <td>3</td>
    <td>Alice</td>
    <td>Tablet</td>
    <td>1</td>
    <td>300</td>
    <td>2023-01-02</td>
  </tr>
</table>

<p>Normalize this table to at least the 3rd Normal Form (3NF). List the new tables, their columns, primary keys, and any foreign keys as needed.</p>

<button onclick="toggleAnswer3()">View answer</button>
<div id="answer3" style="display:none;">
    <h2>Answer to Exercise 3</h2>
    <p>For the given exercise, we can normalize the table to 3NF by creating the following tables:</p>
    <pre>
Customer
- id (primary key)
- name

Product
- id (primary key)
- name
- price

Order
- id (primary key)
- customer_id (foreign key)
- order_date

OrderItem
- id (primary key)
- order_id (foreign key)
- product_id (foreign key)
- quantity
    </pre>
    <p>These tables eliminate redundancy and dependencies, conforming to 3NF requirements.</p>
</div>
<script>
function toggleAnswer3() {
    var answer = document.getElementById("answer3");
    if (answer.style.display === "none") {
        answer.style.display = "block";
    } else {
        answer.style.display = "none";
    }
}
</script>

